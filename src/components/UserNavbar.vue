<script setup>
import { onMounted, ref } from "vue";

const navbars = [
  {
    icon: "user",
    name: "User",
    link: "/user/me",
  },
  {
    icon: "download",
    name: "Downloads",
    link: "/user/downloads",
  },
  {
    icon: "collection",
    name: "My collections",
    link: "/user/collections",
  },
];

const indexActive = ref(-1);

onMounted(() => {
  const path = window.location.pathname.split("/").pop();
  const index = navbars.findIndex((item) => item.link.split("/").pop() === path);
  if (index !== -1) {
    indexActive.value = index;
  }
});
</script>

<template>
  <ul class="tabs-menu flex gap-4 items-center justify-center text-[#424242] text-[13px]">
    <li
      v-for="(item, index) in navbars"
      :key="index"
      class="tab-item w-fit"
      :class="{ active: indexActive === index }"
    >
      <a :href="item.link" class="flex items-center gap-2 p-2">
        <span>
          <svg
            v-if="item.icon === 'user'"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="-49 141 512 512"
            width="13"
            height="13"
            aria-hidden="true"
            fill="currentColor"
          >
            <path
              d="M423 638H-9c-13.807 0-25-11.193-25-25 0-53.438 17.131-104.058 49.542-146.388 22.2-28.994 50.961-52.656 83.376-69.006C75.53 371.377 62 337.07 62 301c0-79.953 65.047-145 145-145s145 65.047 145 145c0 36.07-13.53 70.377-36.918 96.606 32.416 16.349 61.177 40.012 83.376 69.005C430.869 508.942 448 559.562 448 613c0 13.807-11.193 25-25 25M17.657 588h378.687c-9.908-74.383-63.38-137.724-136.792-158.682a25 25 0 0 1-5.533-45.75C283.615 366.669 302 335.03 302 301c0-52.383-42.617-95-95-95s-95 42.617-95 95c0 34.03 18.386 65.668 47.981 82.568a25 25 0 0 1 12.423 24.712 25 25 0 0 1-17.956 21.038C81.037 450.276 27.564 513.617 17.657 588"
            ></path>
          </svg>
          <svg
            v-else-if="item.icon === 'download'"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="-49 141 512 512"
            width="13"
            height="13"
            fill="currentColor"
          >
            <path
              d="M438 403c-13.808 0-25 11.193-25 25v134c0 19.299-15.701 35-35 35H36c-19.299 0-35-15.701-35-35V428c0-13.807-11.193-25-25-25s-25 11.193-25 25v134c0 46.869 38.131 85 85 85h342c46.869 0 85-38.131 85-85V428c0-13.807-11.192-25-25-25"
            ></path>
            <path
              d="M189.322 530.678a25.004 25.004 0 0 0 35.356 0l84.853-84.853c9.763-9.763 9.763-25.592 0-35.355s-25.592-9.763-35.355 0L232 452.645V172c0-13.807-11.193-25-25-25s-25 11.193-25 25v280.645l-42.175-42.175c-9.764-9.763-25.592-9.763-35.355 0s-9.763 25.592 0 35.355z"
            ></path>
          </svg>
          <svg
            v-else-if="item.icon === 'collection'"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="-49 141 512 512"
            width="13"
            height="13"
            aria-hidden="true"
            fill="currentColor"
          >
            <path
              d="M462.998 325.742c0-75.526-59.998-149.797-148.419-149.797-38.906 0-75.989 13.503-104.409 39.715a153 153 0 0 0-3.17 3.009 155 155 0 0 0-3.17-3.009c-28.42-26.212-65.503-39.715-104.409-39.715-88.421 0-148.419 74.271-148.419 149.797 0 40.557 15.467 78.684 44.143 107.36l-.002-.002L161.01 599.011c12.276 12.28 28.6 19.043 45.964 19.044h.005l.022-.001.022.001h.005c17.364-.001 33.688-6.765 45.964-19.044l165.867-165.912-.002.002c28.674-28.675 44.141-66.803 44.141-107.359M383.5 397.746l-.002.002L217.63 563.66a14.9 14.9 0 0 1-10.607 4.395h-.001l-.022-.001-.022.001h-.001a14.9 14.9 0 0 1-10.607-4.395L30.503 397.749l-.002-.002C11.337 378.583 1.002 353.104 1.002 326c0-54.451 44.665-100.246 100.747-100.246 24.43 0 48.756 9.003 68.184 26.66 15.735 14.301 17.818 30.356 37.068 30.356s21.333-16.055 37.068-30.356c19.427-17.658 43.753-26.66 68.184-26.66C368.335 225.754 413 271.549 413 326c-.001 27.104-10.337 52.583-29.5 71.746"
            ></path>
          </svg>
        </span>
        <span>{{ item.name }}</span>
      </a>
    </li>
  </ul>
</template>
